# Product Requirements Document: Workout Tracker

## Overview

A mobile-first web application for tracking workout exercises, sets, and reps. The app provides a streamlined UX for logging workouts with intelligent defaults, exercise customization, and workout history.

**Target URL:** `workout.emilycogsdill.com`

## Core Features

### 1. Workout Tab

#### 1.1 Empty State
- Single "Start Workout" button centered on screen
- No header text needed (button is self-explanatory)

#### 1.2 Active Workout
- Header shows "Today's Workout" for new workouts, or date (MM/DD/YY) when editing past workouts
- "Finish" button (or "Save" when editing past workout)
- List of added exercises with inline set logging
- "+ Add Exercise" dashed button at bottom

#### 1.3 Exercise Card (in active workout)
- Exercise name and weight type indicator (color-coded)
- Weight types:
  - **Total Weight** (cyan) - for cable machines, machines
  - **Per Side** (purple) - for dumbbells
  - **Added Weight +bar** (yellow) - plates added to barbell
  - **Bodyweight** (green) - no external weight
- "x" button to remove exercise (with confirmation)

#### 1.4 Set Logging
- Sets displayed as numbered rows with weight and reps inputs
- Each set has optional note field (for unusual measurements like planks)
- Sets are editable inline (tap to change values)
- Delete button ("x") for each set
- **Add Set Flow:**
  1. Collapsed state shows "+ Add set" link
  2. Clicking expands form pre-populated with last set values
  3. Save/Cancel buttons
- **Copy Previous Workout:** If no sets logged yet but previous workout had this exercise, show "Copy all X sets" button with preview

#### 1.5 Add Exercise View
- Cancel button returns to workout
- Category filter pills: All, Push, Pull, Legs, Core
- Sort toggle: Recent (default) / A-Z (click toggles asc/desc)
- Search input for filtering by name
- Exercise list shows name + last logged date (MM/DD/YY format)

### 2. History Tab

#### 2.1 Workout List
- Cards showing date, exercise count, first 3 exercise names
- Entire card is clickable to edit workout
- "Copy to new workout" link at bottom of each card

#### 2.2 Edit Past Workout
- Opens workout in Workout tab with all sets pre-populated
- Header shows workout date instead of "Today's Workout"
- Button says "Save" instead of "Finish"
- Changes update history in-place

#### 2.3 Copy Workout
- Creates new workout with same exercises but empty sets
- Each exercise shows "Copy all X sets" button from original

### 3. Exercises Tab

#### 3.1 Exercise List View
- Header with "Exercises" title and "+ New" button
- Sort toggle: Recent (default) / A-Z
- Search input
- Collapsible category groups: Push, Pull, Legs, Core, Other
  - Categories stay expanded when changing sort
  - Exercise count shown next to category name
- Exercise items show name + last logged date + "custom" badge if applicable

#### 3.2 Exercise Create/Edit View
- Fields:
  - **Name** (required, disabled for default exercises)
  - **Category** dropdown: Chest, Shoulders, Triceps, Back, Biceps, Legs, Core, Cardio, Other
  - **Unit** toggle: lbs / kg (per-exercise setting)
  - **Weight Type** radio options (always editable, even for defaults)
- Recent Sets section (when editing): Last 10 sets in descending order (most recent first)
  - Columns: Date, Weight (with unit), Reps, Note
- Delete button (only for custom exercises)

#### 3.3 Custom Exercise Override
- Users can modify weight type/unit for default exercises
- Creates a custom override that takes precedence
- Original default can be restored by deleting custom version

### 4. Settings Tab

- "Clear All Data" button with confirmation
- Version indicator

### 5. Navigation

- Fixed bottom navigation bar with 4 tabs: Workout, History, Exercises, Settings
- Active tab highlighted in blue
- Tab icons with labels

## Data Model

### Exercise
```typescript
interface Exercise {
  name: string;
  type: 'total' | '/side' | '+bar' | 'bodyweight';
  category: 'Chest' | 'Shoulders' | 'Triceps' | 'Back' | 'Biceps' | 'Legs' | 'Core' | 'Cardio' | 'Other';
  unit: 'lbs' | 'kg';
}
```

### Set
```typescript
interface Set {
  weight: number;
  reps: number;
  note?: string; // Optional, for unusual measurements
}
```

### WorkoutExercise
```typescript
interface WorkoutExercise {
  name: string;
  sets: Set[];
}
```

### Workout
```typescript
interface Workout {
  id?: string; // Generated by database
  startTime: number; // Unix timestamp
  endTime?: number; // Unix timestamp, set when finished
  exercises: WorkoutExercise[];
}
```

### User State
```typescript
interface UserState {
  customExercises: Exercise[]; // User-defined or overridden exercises
}
```

## Default Exercise Library

### Push
- **Chest:** Bench Press (total), Incline Bench Press (total), Dumbbell Press (/side), Incline Dumbbell Press (/side), Cable Fly (total)
- **Shoulders:** Overhead Press (+bar), Dumbbell Shoulder Press (/side), Lateral Raise (/side), Face Pull (total)
- **Triceps:** Tricep Pushdown (total), Skull Crusher (+bar)

### Pull
- **Back:** Deadlift (+bar), Lat Pulldown (total), Seated Cable Row (total), Barbell Row (+bar), Dumbbell Row (/side), Pull-ups (bodyweight)
- **Biceps:** Barbell Curl (total), Hammer Curl (/side), Preacher Curl (/side)

### Legs
- Squat (+bar), Romanian Deadlift (+bar), Leg Press (total), Leg Curl (total), Calf Raise (total), Lunges (/side)

## UX Requirements

### Visual Design
- Dark theme (gray-900 background, gray-800 cards)
- Mobile-first, max-width 390px centered
- No emojis anywhere in the UI
- Tailwind CSS for styling
- Color-coded weight type indicators

### Interactions
- No confirmation dialogs except for:
  - Removing exercise from workout
  - Clearing all data
  - Deleting custom exercise
- Auto-save: Unfinished workouts auto-save to history on next app load
- Date format: MM/DD/YY throughout
- 0 is a valid weight/rep value

### Sorting
- Default sort by recency (most recently logged first)
- Click sort button toggles ascending/descending
- Sort state persists within session

## Technical Architecture

### Stack
- **Runtime:** Cloudflare Workers
- **Database:** Cloudflare D1 (SQLite)
- **Frontend:** Static HTML/CSS/JS served by Worker
- **Styling:** Tailwind CSS (CDN or built)

### Database Schema

```sql
-- Users table (for future auth, currently single-user)
CREATE TABLE users (
  id TEXT PRIMARY KEY,
  created_at INTEGER NOT NULL
);

-- Custom exercises (overrides or user-created)
CREATE TABLE custom_exercises (
  id TEXT PRIMARY KEY,
  user_id TEXT NOT NULL,
  name TEXT NOT NULL,
  type TEXT NOT NULL,
  category TEXT NOT NULL,
  unit TEXT NOT NULL DEFAULT 'lbs',
  created_at INTEGER NOT NULL,
  FOREIGN KEY (user_id) REFERENCES users(id)
);

-- Workouts
CREATE TABLE workouts (
  id TEXT PRIMARY KEY,
  user_id TEXT NOT NULL,
  start_time INTEGER NOT NULL,
  end_time INTEGER,
  created_at INTEGER NOT NULL,
  FOREIGN KEY (user_id) REFERENCES users(id)
);

-- Workout exercises (junction table)
CREATE TABLE workout_exercises (
  id TEXT PRIMARY KEY,
  workout_id TEXT NOT NULL,
  exercise_name TEXT NOT NULL,
  position INTEGER NOT NULL,
  FOREIGN KEY (workout_id) REFERENCES workouts(id)
);

-- Sets
CREATE TABLE sets (
  id TEXT PRIMARY KEY,
  workout_exercise_id TEXT NOT NULL,
  weight REAL NOT NULL,
  reps INTEGER NOT NULL,
  note TEXT,
  position INTEGER NOT NULL,
  FOREIGN KEY (workout_exercise_id) REFERENCES workout_exercises(id)
);
```

### API Endpoints

```
GET  /api/workouts           - List all workouts
POST /api/workouts           - Create workout
GET  /api/workouts/:id       - Get single workout with exercises/sets
PUT  /api/workouts/:id       - Update workout
DELETE /api/workouts/:id     - Delete workout

GET  /api/exercises          - List custom exercises
POST /api/exercises          - Create custom exercise
PUT  /api/exercises/:id      - Update custom exercise
DELETE /api/exercises/:id    - Delete custom exercise

POST /api/data/clear         - Clear all user data
```

### Deployment

- **Domain:** workout.emilycogsdill.com
- **Wrangler Configuration:**
  - Production environment with custom route
  - D1 database binding
  - Static assets via Assets feature

## MVP vs Future

### MVP (This Implementation)
- Single-user (no authentication)
- Local-first with cloud sync
- All features described above

### Future Considerations
- User authentication
- Progressive Web App (PWA) with offline support
- Exercise statistics and charts
- Workout templates
- Export data to CSV
- Timer between sets
